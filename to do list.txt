Feature Specification: Intelligent Auto-Scheduling Planning TabExecutive SummaryThe Planning Tab is transformed from a static list into a dynamic, single-day schedule. It combines manual task prioritization with an intelligent "physics engine" that treats tasks as time blocks. The system automatically calculates start and end times based on task duration, flowing floating tasks around fixed calendar appointments.1. Visual Design Language & UI OverviewBased on the provided visual reference, the interface adopts a clean, dark-mode aesthetic focused on information hierarchy and immediate status recognition.Container Style: Tasks are presented as distinct cards against a dark background, providing clear visual separation.Color Coding for Status:Gray/Dimmed: Completed tasks.Standard Text (White): Active, upcoming tasks.Red/Accent: Critical information, errors, collision warnings, and "overwhelmed" states (past midnight).Green/Yellow Icons: Metric indicators (Effort/Benefit).Typography: Clean, highly readable sans-serif fonts. Time data (computed by the system) is visually secondary to the Task Title (entered by the user).2. Detailed Component Breakdown & Behavior2.1. The Sticky Header & Global Start TimeAt the very top of the scrollable view is a pinned header.Visual UI: A prominent, tappable pill displaying "Start Day: [Time] AM/PM" with a clock icon.UX Behavior: Tapping this opens a native time picker.Engineering Logic: This single timestamp is the anchor point ($t_0$) for the entire scheduling engine. Changing this instantly triggers a recalculation cascade for all subsequent floating tasks.2.2. The Current Time Progress LineA visual anchor indicating the user's position in their day.Visual UI: A thin, bright red horizontal line spanning the width of the screen, labeled with the current live time (e.g., "Current Time: 10:45 AM").UX Behavior: This line moves down the list in real-time throughout the day.State Change: Tasks that are above this line but not marked complete should visually degrade (e.g., slightly dimmed or marked with a subtle "Overdue" indicator) to prompt action.2.3. Task Row Anatomy (Fixed vs. Floating)Each task card is a complex data object displayed simply.Left Side (System Computed):Drag Handle: Standard affordance for reordering.Checkmark Circle: For marking completion.Computed Time Block: The start and end time calculated by the engine (e.g., 10:45 - 11:45).Center/Right Side (User Input):Task Title: Truncated text.Duration: The user-estimated time (e.g., 1h, 15m). Crucial: This drives the engine.Metrics: Small icons for Effort and Benefit.The "Fixed" Task Distinction:If a user pins a task to a specific time (e.g., the "Team Meeting" at 12:00), a Lock Icon appears next to the time. The time label explicitly adds "(Fixed)". These act as immovable boulders in the schedule stream.2.4. The "Water Flow" Scheduling EngineThis is the core backend logic manifesting in the UI.Logic: The engine calculates the schedule top-to-bottom.Task A Start Time = Global Day Start Time.Task A End Time = Start Time + Duration.Task B Start Time = Task A End Time (unless Task B is Fixed).Fixed Task Interruption: When the cascade encounters a Fixed task, it skips to that fixed start time. The gap between the previous floating task and the fixed task becomes "free time."2.5. Interaction: Drag & Drop with Real-Time Collision DetectionThe most complex interaction shown in the reference image.Trigger: Long-press and drag a task card.Active State: The dragged card elevates. The underlying list separates to show potential drop zones.Smart Gaps: The system identifies empty time slots between fixed tasks (e.g., the "30m Free Time" block shown).Collision/Error State (Red Zone):As seen in the image: If the user drags a 1h duration task over a gap that is only 15m wide, the drop zone must provide negative feedback.Visuals: The drop zone turns bright red. A warning icon appears with explicit text: "Won't fit: 1h task in 15m gap."UX: The user is prevented from dropping the task there. They must find a larger gap or drop it in open space where it can push other tasks down.2.6. Special States: Gaps and OverwhelmedThe "Gap" Block:Visual UI: A distinct, slightly darker card representing free time (e.g., "30m Free Time").Call to Action: A small "Fill gap" button. Tapping this could open a quick-add modal pre-filled with that duration, or suggest tasks from later in the list that fit.The "Overwhelmed" State (Past Midnight):Visual UI: As seen on the bottom "Project Overflow" task. If cumulative duration pushes a task past the end of the day (e.g., 00:30 the next day), the computed time text turns red and appends a (+1 day) indicator.UX: A subtle, non-intrusive warning that the user has over-committed.3. Engineering Considerations for "Pro" FeelTo achieve the professional feel depicted in the mockup, backend and frontend performance is paramount.Zero-Latency Math: The scheduling engine must run client-side. Every time a duration is edited or a drag event ends, the entire list's start/end times must recalculate and re-render instantly. Any server-side lag will break the illusion of direct manipulation.Optimized Dragging: The collision detection during the drag state needs to be highly optimized to prevent dropped frames while calculating whether the dragged item fits in the hovered gap.Timer Accuracy: The "Current Time" red line needs a reliable background timer to update its position at least every minute without draining battery.