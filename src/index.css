@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-color: #ffffff;
    --text-color: #1a1a1a;
    --border-color: #e0e0e0;
    --accent-color: #3b82f6;
    --placeholder-color: #a0a0a0;
    --hover-bg-color: #f0f0f0;
    --completed-text-color: #888888;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg-color: #1f1f1f;
      --text-color: #f0f0f0;
      --border-color: #3a3a3a;
      --accent-color: #60a5fa;
      --placeholder-color: #5c5c5c;
      --hover-bg-color: #2f2f2f;
      --completed-text-color: #707070;
    }
  }

  body {
    @apply m-0 bg-[var(--bg-color)] text-[var(--text-color)] antialiased;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif;
  }

  * {
    box-sizing: border-box;
  }
}

/* TipTap Editor Styles - Mobile First */
.ProseMirror {
  @apply outline-none min-h-full p-4 sm:p-6;
  font-size: 16px; /* Prevents iOS zoom on focus */
  -webkit-tap-highlight-color: transparent;
}

@media (min-width: 640px) {
  .ProseMirror {
    font-size: 14px;
  }
}

.ProseMirror:focus {
  @apply outline-none;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--placeholder-color);
  pointer-events: none;
  height: 0;
}

.ProseMirror h1 {
  @apply text-3xl font-semibold mt-6 mb-4 pb-2 border-b-2 border-[var(--border-color)];
}

.ProseMirror h2 {
  @apply text-2xl font-semibold mt-5 mb-3 pb-1 border-b border-[var(--border-color)];
}

.ProseMirror h3 {
  @apply text-xl font-semibold mt-4 mb-2;
}

.ProseMirror ul,
.ProseMirror ol {
  @apply pl-7 my-3;
}

.ProseMirror ul {
  @apply list-disc;
}

.ProseMirror ol {
  @apply list-decimal;
}

.ProseMirror li {
  @apply my-1;
}

.ProseMirror blockquote {
  @apply my-4 px-5 py-3 border-l-4 border-[var(--accent-color)] bg-[var(--accent-color)] bg-opacity-5 rounded-r italic;
}

/* Task List Styles */
.ProseMirror ul[data-type="taskList"] {
  @apply list-none pl-0;
}

.ProseMirror ul[data-type="taskList"] li {
  @apply flex items-start my-2;
}

.ProseMirror ul[data-type="taskList"] li > label {
  @apply flex-shrink-0 mr-3 mt-1;
}

.ProseMirror ul[data-type="taskList"] li > div {
  @apply flex-grow;
}

.ProseMirror ul[data-type="taskList"] li[data-checked="true"] > div {
  @apply line-through text-[var(--completed-text-color)];
}

.ProseMirror ul[data-type="taskList"] input[type="checkbox"] {
  @apply w-5 h-5 cursor-pointer accent-[var(--accent-color)];
}

/* Table styles â€“ pasted or inserted tables */
.ProseMirror .tableWrapper {
  @apply overflow-x-auto my-4 rounded-lg border border-[var(--border-color)];
}
.ProseMirror table {
  @apply w-full border-collapse;
}
.ProseMirror th,
.ProseMirror td {
  @apply border border-[var(--border-color)] px-3 py-2 text-left;
}
.ProseMirror th {
  @apply bg-[var(--hover-bg-color)] font-semibold;
}

/* Hide completed tasks when toggle is active */
.hide-completed-tasks
  .ProseMirror
  ul[data-type="taskList"]
  li[data-checked="true"] {
  display: none;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  @apply w-2 h-2 sm:w-3 sm:h-3;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-[var(--border-color)] rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-[var(--accent-color)];
}

/* Mobile Optimizations */
@media (max-width: 640px) {
  /* Better touch targets */
  button,
  a,
  input[type="checkbox"] {
    min-width: 44px;
    min-height: 44px;
  }

  /* Prevent text size adjustment */
  html {
    -webkit-text-size-adjust: 100%;
  }

  /* Smooth scrolling */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Better keyboard handling */
  .ProseMirror {
    /* Prevent keyboard from hiding content */
    min-height: calc(100vh - 300px);
  }

  /* Larger checkboxes on mobile */
  .ProseMirror ul[data-type="taskList"] input[type="checkbox"] {
    @apply w-6 h-6;
  }

  /* Better line height for readability */
  .ProseMirror p,
  .ProseMirror li {
    line-height: 1.8;
  }
}

/* Touch-friendly utilities */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  @apply w-1 h-1;
}

/* Safe area helpers for iOS notch / home indicator */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}
